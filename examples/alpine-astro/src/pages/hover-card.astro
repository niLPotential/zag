---
import { getControlDefaults, hoverCardControls } from "@zag-js/shared"
import Layout from "../layouts/Layout.astro"
import Nav from "../components/Nav.astro"
import Toolbar from "../components/Toolbar.astro"
import Controls from "../components/Controls.astro"
import StateVisualizer from "../components/StateVisualizer.astro"

const state = getControlDefaults(hoverCardControls)
---

<script>
  import * as hoverCard from "@zag-js/hover-card"
  import Alpine from "alpinejs"
  import { usePlugin } from "../lib"

  Alpine.plugin(usePlugin("hover-card", hoverCard))
</script>

<Layout>
  <div
    class="page"
    x-data={JSON.stringify(state)}
    x-id="['hover-card']"
    x-hover-card={`{id: $id('hover-card'), ${Object.keys(state)}}`}
  >
    <Nav />
    <main class="hover-card">
      <div style={{ display: "flex", gap: "50px" }}>
        <a href="https://twitter.com/zag_js" target="_blank" rel="noreferrer" x-hover-card:trigger>Twitter</a>

        <template x-if="$hoverCard.open">
          <div x-hover-card:positioner>
            <div x-hover-card:content>
              <div x-hover-card:arrow>
                <div x-hover-card:arrow-tip></div>
              </div>
              Twitter Preview
              <a href="https://twitter.com/zag_js" target="_blank" rel="noreferrer">Twitter</a>
            </div>
          </div>
        </template>
        <div data-part="test-text">Test text</div>
      </div>
    </main>

    <Toolbar>
      <Controls config={hoverCardControls} {state} slot="controls" />
      <StateVisualizer label="hover-card" />
    </Toolbar>
  </div>
</Layout>

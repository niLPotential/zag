---
import Nav from "../components/Nav.astro"
import StateVisualizer from "../components/StateVisualizer.astro"
import Toolbar from "../components/Toolbar.astro"
import Layout from "../layouts/Layout.astro"
---

<script>
  import * as menu from "@zag-js/menu"
  import Alpine from "alpinejs"
  import { usePlugin } from "../lib"

  Alpine.plugin(usePlugin("menu", menu))
</script>

<Layout>
  <div class="page" x-data x-id="['menu']" x-menu="{id: $id('menu'), onSelect: console.log}">
    <Nav />
    <main class="context-menu">
      <div x-menu:context-trigger>Right Click here</div>
      <template x-teleport="body">
        <div x-menu:positioner>
          <ul x-menu:content>
            <li x-menu:item="{value: 'edit'}">Edit</li>
            <li x-menu:item="{value: 'duplicate'}">Duplicate</li>
            <li x-menu:item="{value: 'delete'}">Delete</li>
            <li x-menu:item="{value: 'export'}">Export...</li>
          </ul>
        </div>
      </template>
    </main>

    <Toolbar>
      <StateVisualizer />
    </Toolbar>
  </div>
</Layout>

---
import { getControlDefaults, numberInputControls } from "@zag-js/shared"
import Layout from "../layouts/Layout.astro"
import Nav from "../components/Nav.astro"
import Toolbar from "../components/Toolbar.astro"
import Controls from "../components/Controls.astro"
import StateVisualizer from "../components/StateVisualizer.astro"

const state = getControlDefaults(numberInputControls)
---

<script>
  import * as numberInput from "@zag-js/number-input"
  import Alpine from "alpinejs"
  import { usePlugin } from "../lib"

  Alpine.plugin(usePlugin("number-input", numberInput))
</script>

<Layout>
  <div
    class="page"
    x-data={JSON.stringify(state)}
    x-id="['number-input']"
    x-number-input={`{id: $id('number-input'), ${Object.keys(state)}}`}
  >
    <Nav />
    <main>
      <div x-number-input:root>
        <div data-testid="scrubber" x-number-input:scrubber></div>
        <label data-testid="label" x-number-input:label>Enter number:</label>
        <div x-number-input:control>
          <button data-testid="dec-button" x-number-input:decrement-trigger>DEC</button>
          <input data-testid="input" x-number-input:input />
          <button data-testid="inc-button" x-number-input:increment-trigger>INC</button>
        </div>
      </div>
    </main>
    <Toolbar>
      <Controls config={numberInputControls} {state} slot="controls" />
      <StateVisualizer label="number-input" omit={["formatter", "parser"]} />
    </Toolbar>
  </div>
</Layout>

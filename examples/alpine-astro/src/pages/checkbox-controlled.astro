---
import Nav from "../components/Nav.astro"
import Layout from "../layouts/Layout.astro"
---

<script>
  import * as checkbox from "@zag-js/checkbox"
  import Alpine from "alpinejs"
  import { usePlugin } from "../lib"

  Alpine.plugin(usePlugin("checkbox", checkbox))
</script>

<Layout>
  <div
    class="page"
    x-data="{checked: false}"
    x-id="['checkbox']"
    x-checkbox="{
      id: $id('checkbox'),
      name: 'checkbox',
      checked,
      onCheckedChange(details) {
        checked = !!details.checked
      },
    }"
  >
    <Nav />
    <main class="checkbox">
      <label x-checkbox:root>
        <div x-checkbox:control></div>
        <span x-checkbox:label x-text="$checkbox.checked ? 'Checked' : 'Unchecked'"></span>
        <input x-checkbox:hidden-input data-testid="hidden-input" />
        <div x-checkbox:indicator>Indicator</div>
      </label>

      <button type="button" x-bind:disabled="$checkbox.checked" x-on:click="$checkbox.setChecked(true)">Check</button>
      <button type="button" x-bind:disabled="! $checkbox.checked" x-on:click="$checkbox.setChecked(false)">
        Uncheck
      </button>
      <button type="reset">Reset Form</button>
    </main>
  </div>
</Layout>

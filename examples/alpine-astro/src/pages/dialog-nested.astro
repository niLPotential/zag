---
import Layout from "../layouts/Layout.astro"
---

<script>
  import Alpine from "alpinejs"
  import * as dialog from "@zag-js/dialog"
  import { createZagPlugin } from "../lib"

  Alpine.plugin(createZagPlugin("dialog", dialog))
</script>

<Layout>
  <main>
    <div x-data x-id="['dialog']" x-dialog="{id: $id('dialog')}">
      <button x-dialog:trigger data-testid="trigger-1">Open Dialog</button>

      <div style="min-height: 1200px;"></div>

      <template x-if="$dialog.open">
        <div>
          <div x-dialog:backdrop></div>
          <div x-dialog:content>
            <div data-testid="positioner-1" x-dialog:positioner>
              <h2 x-dialog:title>Edit profile</h2>
              <p x-dialog:description>Make changes to your profile here. Click save when you are done.</p>
              <button x-dialog:close-trigger data-testid="close-1">X</button>
              <input type="text" placeholder="Enter name..." data-testid="input-1" />
              <button data-testid="save-button-1">Save Changes</button>

              <div x-id="['dialog']" x-dialog="{id: $id('dialog')}">
                <button x-dialog:trigger data-testid="trigger-2"> Open Nested </button>

                <template x-if="$dialog.open">
                  <div>
                    <div x-dialog:backdrop></div>
                    <div data-testid="positioner-2" x-dialog:positioner>
                      <div x-dialog:content>
                        <h2 x-dialog:title>Nested</h2>
                        <button x-dialog:close-trigger data-testid="close-2"> X </button>
                        <button x-on:click="$dialog.setOpen(false)" data-testid="special-close">
                          Close Dialog 1
                        </button>
                      </div>
                    </div>
                  </div>
                </template>
              </div>
            </div>
          </div>
        </div>
      </template>
    </div>
  </main>
</Layout>

---
interface Props {
  nested?: boolean
  id: string
}
const { nested, id } = Astro.props
---

<div data-part="root" x-popover={`{id: ${id}, portalled: true, modal: false}`}>
  {!nested && <button data-testid="button-before">Button :before</button>}

  <button data-testid="popover-trigger" x-popover:trigger>
    {nested ? "Open Nested" : "Click me"}
  </button>

  {!nested && <div x-popover:anchor>anchor</div>}

  <template x-teleport="body">
    <div x-popover:positioner>
      <div data-testid="popover-content" class="popover-content" x-popover:content>
        <div x-popover:arrow>
          <div x-popover:arrow-tip></div>
        </div>
        <div data-testid="popover-title" x-popover:title>Popover Title</div>
        <div data-part="body" data-testid="popover-body">
          <a>Non-focusable Link</a>
          <a href="#" data-testid="focusable-link">Focusable Link</a>
          <input data-testid="input" placeholder="input" />
          <button data-testid="popover-close-button" x-popover:close-trigger>X</button>
          <slot />
        </div>
      </div>
    </div>
  </template>
  {!nested && <span data-testid="plain-text">I am just text</span>}
  {!nested && <button data-testid="button-after">Button :after</button>}
</div>
